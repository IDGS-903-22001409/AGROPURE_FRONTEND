<div class="products-container">
  <div class="products-header">
    <h1>Catálogo de Productos AGROPURE</h1>
    <p>Sistemas inteligentes de monitoreo y tratamiento de agua para riego</p>
  </div>

  <div class="products-grid" *ngIf="products.length > 0; else noProducts">
    <mat-card class="product-card" *ngFor="let product of products">
      <div class="product-image">
        <mat-icon class="product-icon">water_drop</mat-icon>
      </div>

      <mat-card-header>
        <mat-card-title>{{ product.name }}</mat-card-title>
        <mat-card-subtitle
          >Desde ${{ product.basePrice | number : "1.2-2" }}</mat-card-subtitle
        >
      </mat-card-header>

      <mat-card-content>
        <p class="product-description">{{ product.description }}</p>

        <div class="materials-info" *ngIf="product.materials.length > 0">
          <h4>Componentes incluidos:</h4>
          <ul class="materials-list">
            <li *ngFor="let material of product.materials.slice(0, 3)">
              {{ material.materialName }} ({{ material.quantity }})
            </li>
            <li *ngIf="product.materials.length > 3">
              +{{ product.materials.length - 3 }} componentes más
            </li>
          </ul>
        </div>
      </mat-card-content>

      <mat-card-actions>
        <button mat-button [routerLink]="['/products', product.id]">
          <mat-icon>visibility</mat-icon>
          Ver Detalles
        </button>
        <button
          mat-raised-button
          color="primary"
          [routerLink]="['/quotes']"
          [queryParams]="{ productId: product.id }"
        >
          <mat-icon>request_quote</mat-icon>
          Cotizar
        </button>
      </mat-card-actions>
    </mat-card>
  </div>

  <ng-template #noProducts>
    <div class="no-products">
      <mat-icon>inventory_2</mat-icon>
      <h2>No hay productos disponibles</h2>
      <p>Estamos trabajando en nuevos productos. Vuelve pronto.</p>
    </div>
  </ng-template>
</div>
